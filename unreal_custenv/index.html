<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>定制虚幻引擎环境 - 低空模拟器</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u5b9a\u5236\u865a\u5e7b\u5f15\u64ce\u73af\u5883";
        var mkdocs_page_input_path = "unreal_custenv.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 低空模拟器
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">主页</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">主页</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">修改记录</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">构建 AirSim</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../use_precompiled/">下载二进制文件</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_windows/">在 Windows 上构建</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_linux/">在 Linux 上构建</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_macos/">在 macOS 上构建</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../docker_ubuntu/">Linux 上的 Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../azure/">Azure 上的 ArSim</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">定制虚幻引擎环境</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#linux">Linux 用户须知</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_2">分步说明</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_3">选择您的车辆：汽车或多旋翼飞行器</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#updating-your-environment-to-latest-version-of-airsim">Updating Your Environment to Latest Version of AirSim</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#faq">FAQ</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#what-are-other-cool-environments">What are other cool environments?</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#when-i-press-play-button-some-kind-of-video-starts-instead-of-my-vehicle">When I press Play button some kind of video starts instead of my vehicle.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#is-there-easy-way-to-sync-code-in-my-unreal-project-with-code-in-airsim-repo">Is there easy way to sync code in my Unreal project with code in AirSim repo?</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#i-get-some-error-about-map">I get some error about map.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#i-see-add-to-project-option-for-environment-but-not-create-project-option">I see "Add to project" option for environment but not "Create project" option.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#i-already-have-my-own-unreal-project-how-do-i-use-airsim-with-it">I already have my own Unreal project. How do I use AirSim with it?</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_faq/">场景问题和回答</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">使用 AirSim</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../apis/">核心 APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../image_apis/">图像 APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../apis_cpp/">C++ APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../api_docs/html/index.html">API 参考文档</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../wiki/">Wiki 文档</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev_workflow/">开发工作流</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../settings/">设置</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../camera_views/">相机视角</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../using_car/">汽车模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../remote_control/">远程控制</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../xbox_controller/">XBox 控制器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../steering_wheel_installation/">方向盘</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../multi_vehicle/">多车辆</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >传感器</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../sensors/">传感器</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../lidar/">激光雷达</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../distance_sensor/">距离传感器</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../InfraredCamera/">红外相机</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../airsim_ros_pkgs/">ROS: AirSim ROS 包装器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../airsim_tutorial_pkgs/">ROS: AirSim 教程包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gazebo_drone/">导入 Gazebo 模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../retexturing/">域随机化</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../meshes/">网格顶点缓冲区</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../playback/">播放日志</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../voxel_grid/">体素网格生成器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../event_sim/">事件相机</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">设计</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../design/">架构</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../code_structure/">代码结构</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adding_new_apis/">添加新的 APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../modify_recording_data/">修改记录数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../coding_guidelines/">编码指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../flight_controller/">飞行控制器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simple_flight/">简单飞行</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hello_drone/">Hello Drone</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">外部飞行控制器</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >MavLink 和 PX4</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../px4_setup/">AirSim 的 PX4 设置</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_sitl/">软件在环中的 PX4</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_sitl_wsl2/">带有 WSL 2 的 PX4 SITL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_lockstep/">PX4 Lockstep</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_multi_vehicle/">软件在环中的 PX4 多车辆</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://youtu.be/1oY8Qu5maQQ">AirSim 与 Pixhawk</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://youtu.be/HNWdYrtw3f0">使用 AirSim 设置 PX4</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://www.youtube.com/watch?v=d_FyjKDWQfc&feature=youtu.be">调试姿态估计</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://github.com/Microsoft/AirSim/wiki/Intercepting-MavLink-messages">拦截 MavLink 消息</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://github.com/Microsoft/AirSim/wiki/Rapid-Descent-on-PX4-drones">PX4 无人机快速下降</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_build/">构建 PX4</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../px4_logging/">PX4/MavLink 日志记录</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../log_viewer/">MavLink 日志查看器</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mavlinkcom/">MavLinkCom</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mavlinkcom_mocap/">MavLink MoCap</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >ArduPilot</a>
    <ul>
                <li class="toctree-l2"><a class="" href="https://ardupilot.org/dev/docs/building-the-code.html">ArduPilot 软件在环设置</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://ardupilot.org/dev/docs/sitl-with-airsim.html">AirSim & ArduPilot</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">升级</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../unreal_upgrade/">升级虚幻引擎</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../upgrade_apis/">升级 APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../upgrade_settings/">升级设置</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">贡献教程</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../reinforcement_learning/">强化学习</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://www.youtube.com/watch?v=y09VbdQWvQY">使用 Marketplace 中的环境</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/simondlevy/AirSimTensorFlow">简单的防撞</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://aka.ms/AutonomousDrivingCookbook">Azure 上的自动驾驶</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/Microsoft/AirSim/wiki/hexacopter">构造六旋翼飞行器</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/Microsoft/AirSim/wiki/moveOnPath-demo">移动路径演示</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../point_clouds/">构建点云</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../drone_survey/">使用无人机进行测量</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../orbit/">轨道轨迹</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://youtu.be/Bp86WiLUC80">导入自定义多旋翼网格</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../object_detection/">Object Detection</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://youtu.be/ZonkdMcwXH4">带有 MAVROS 和 PX4 的 AirSim</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">杂项</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../custom_drone/">真实无人机上的 AirSim</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cmake_linux/">在 Linux 上安装 cmake</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hard_drive/">硬盘繁忙时的提示</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pfm/">pfm 格式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../unreal_proj/">设置虚幻引擎环境</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../unreal_blocks/">Blocks 环境</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../who_is_using/">谁在使用 AirSim</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../working_with_plugin_contents/">使用 UE 插件内容</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/Microsoft/AirSim/wiki/technion">大学生方程式赛车以色列理工学院自驾赛</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">支持</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SUPPORT/">支持</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../create_issue/">创建问题</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/">贡献</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">低空模拟器</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">构建 AirSim</li>
      <li class="breadcrumb-item active">定制虚幻引擎环境</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/microsoft/airsim/edit/master/docs/unreal_custenv.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="_1">创建和设置虚幻环境<a class="headerlink" href="#_1" title="Permanent link">#</a></h1>
<p>本页包含使用 AirSim 设置虚幻环境的完整说明。虚幻商城 (Unreal Marketplace) 提供了 <a href="https://www.unrealengine.com/marketplace/content-cat/assets/environments">多个环境</a> ，您只需几分钟即可开始使用。您也可以使用 <a href="https://www.turbosquid.com/">turbosquid.com</a> 或 <a href="https://www.cgtrader.com/">cgitrader.com</a> 等网站上提供的环境，但需要稍加努力（点击此处观看 <a href="https://www.youtube.com/watch?v=y09VbdQWvQY&amp;feature">教程视频</a> ）。此外，还有几个 <a href="https://github.com/Microsoft/AirSim/issues/424">免费环境</a> 可供使用。</p>
<p>下面我们将使用虚幻市场中可免费下载的环境，名为 Landscape Mountain，但对于其他环境，步骤都是相同的。</p>
<h2 id="linux">Linux 用户须知<a class="headerlink" href="#linux" title="Permanent link">#</a></h2>
<p>Linux 上没有 <code>Epic Games Launcher</code>，这意味着如果您需要创建自定义环境，则需要 Windows 设备来执行此操作。获取 Unreal 项目文件夹后，只需将其复制到您的 Linux 设备上即可。</p>
<h2 id="_2">分步说明<a class="headerlink" href="#_2" title="Permanent link">#</a></h2>
<ol>
<li>确保已构建 AirSim 并已安装 Unreal 4.27，如 <a href="../build_windows/">构建说明</a> 中所述。</li>
<li>
<p>在 <code>Epic Games Launcher</code> 中，点击“Learn”选项卡，向下滚动找到<code>Landscape Mountains</code>。点击<code>Create Project</code>并下载此内容（下载量约 2GB）。 </p>
<p><img alt="current version" src="../images/landscape_mountains.png" /></p>
</li>
<li>
<p>打开 <code>LandscapeMountains.uproject</code>，它应该启动虚幻编辑器。</p>
<p><img alt="unreal editor" src="../images/unreal_editor.png" /></p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p>景观山脉(Landscape Mountains)项目最高支持虚幻引擎 4.24 版本。如果您尚未安装 4.24 版本，您将看到一个名为<code>Select Unreal Engine Version</code>(选择虚幻引擎版本)的对话框，其中包含一个下拉菜单，用于从已安装的版本中进行选择。选择 4.27 或更高版本，即可将项目迁移到支持的引擎版本。如果您已安装 4.24 版本，则可以手动迁移项目，方法是：在 Windows 资源管理器中导航到相应的 .uproject 文件，右键单击该文件，然后选择<code>Switch Unreal Engine version...</code>(切换虚幻引擎版本...)选项。</p>
</div>
</li>
<li>
<p>从<code>File</code>菜单中选择<code>New C++ class</code>，类类型保留默认<code>None</code>，点击<code>Next</code>，保留默认名称<code>MyClass</code>，然后点击<code>Create Class</code>。我们需要这样做是因为 Unreal 要求项目中至少有一个源文件。它会触发编译并打开 Visual Studio 解决方案 <code>LandscapeMountains.sln</code>。</p>
</li>
<li>
<p>前往你的 AirSim 仓库文件夹，将 <code>Unreal\Plugins</code> 文件夹复制到 <code>LandscapeMountains</code> 文件夹中。这样，你的 Unreal 项目就拥有了 AirSim 插件。</p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p>如果 AirSim 安装是全新安装的，即之前从未构建过，请确保在复制 <code>Unreal\Plugins</code> 文件夹之前，先从根目录运行一次 <code>build.cmd</code>，以便 <code>AirLib</code> 文件也包含在内。如果您在 Blocks 环境中进行了某些更改，请确保从 <code>Unreal\Environments\Blocks</code> 运行 <code>update_to_git.bat</code> 来更新 <code>Unreal\Plugins</code> 中的文件。</p>
</div>
</li>
<li>
<p>编辑 <code>LandscapeMountains.uproject</code>，使其看起来像这样</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;FileVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;EngineAssociation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4.27&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Samples&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Modules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LandscapeMountains&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Runtime&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;LoadingPhase&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Default&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;AdditionalDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;AirSim&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;TargetPlatforms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;MacNoEditor&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;WindowsNoEditor&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;Plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AirSim&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>编辑 <code>Config\DefaultGame.ini</code> 并在末尾添加以下行：</p>
<div class="highlight"><pre><span></span><code>+MapsToCook=(FilePath=&quot;/AirSim/AirSimAssets&quot;)
</code></pre></div>
<p>这样做会强制虚幻引擎将所有必要的 AirSim 内容包含在项目的打包版本中。</p>
</li>
<li>
<p>关闭 Visual Studio 和<code>Unreal Editor</code>，然后在 Windows 资源管理器中右键单击 LandscapeMountains.u 项目，并选择<code>Generate Visual Studio Project Files</code>。此步骤将检测虚幻项目中的所有插件和源文件，并为 Visual Studio 生成 <code>.sln</code> 文件。</p>
<p><img alt="regen" src="../images/regen_sln.png" /></p>
<div class="admonition 提示">
<p class="admonition-title">提示</p>
<p>如果缺少<code>Generate Visual Studio Project Files</code>选项，您可能需要重启计算机以使 Unreal Shell 扩展生效。如果仍然缺少此选项，请在虚幻编辑器中打开 LandscapeMountains.uproject，然后从<code>File</code>菜单中选择<code>Refresh Visual Studio Project</code>。 </p>
</div>
</li>
<li>
<p>在 Visual Studio 中重新打开 <code>LandscapeMountains.sln</code>，并确保“DebugGame Editor”和“Win64”构建配置是活动构建配置。</p>
<p><img alt="build config" src="../images/vsbuild_config.png" /></p>
</li>
<li>
<p>按 <code>F5</code> 来运行。这将启动虚幻编辑器。虚幻编辑器允许您编辑环境、资源和其他游戏相关设置。您首先需要在环境中设置 <code>PlayerStart</code> 对象。在 Landscape Mountains 环境中，PlayerStart 对象已经存在，您可以在 <code>World Outliner</code> 中找到它。确保其位置设置如图所示。AirSim 插件将在此处创建并放置车辆。如果位置过高，车辆会在您按下播放键时立即坠落，从而产生潜在的随机行为。</p>
<p><img alt="lm_player_start_pos.png" src="../images/lm_player_start_pos.png" /></p>
</li>
<li>
<p>在如下所示的 <code>Window/World Settings</code> 中，将 <code>GameMode Override</code> 设置为 <code>AirSimGameMode</code>：</p>
<p><img alt="sim_game_mode.png" src="../images/sim_game_mode.png" /></p>
</li>
<li>
<p>在虚幻编辑器中，前往“编辑-&gt;编辑器偏好设置”，在“搜索”框中输入“CPU”，并确保“在后台运行时使用较少 CPU”(Use Less CPU when in Background) 未勾选。如果不勾选，当虚幻引擎窗口失去焦点时，虚幻引擎的速度将显著下降。</p>
</li>
<li>
<p>请务必<code>保存</code>这些编辑。点击虚幻编辑器中的“播放”按钮。了解 <a href="https://github.com/Microsoft/AirSim/#how-to-use-it">如何使用 AirSim</a> 。</p>
</li>
</ol>
<p>恭喜！您现在可以在自己的虚幻环境中运行 AirSim 了。</p>
<h2 id="_3">选择您的车辆：汽车或多旋翼飞行器<a class="headerlink" href="#_3" title="Permanent link">#</a></h2>
<p>默认情况下，AirSim 会提示用户选择要使用的车辆。您可以通过设置 <a href="../settings/#SimMode">SimMode</a> 轻松更改此设置。请参阅 <a href="../using_car/">使用车辆</a> 指南。</p>
<h2 id="updating-your-environment-to-latest-version-of-airsim">Updating Your Environment to Latest Version of AirSim<a class="headerlink" href="#updating-your-environment-to-latest-version-of-airsim" title="Permanent link">#</a></h2>
<p>Once you have your environment using above instructions, you should frequently update your local AirSim code to latest version from GitHub. Below are the instructions to do this:</p>
<ol>
<li>First put <a href="https://github.com/Microsoft/AirSim/blob/main/Unreal/Environments/Blocks/clean.bat">clean.bat</a> (or <a href="https://github.com/Microsoft/AirSim/blob/main/Unreal/Environments/Blocks/clean.sh">clean.sh</a> for Linux users) in the root folder of your environment. Run this file to clean up all intermediate files in your Unreal project.</li>
<li>Do <code>git pull</code> in your AirSim repo followed by <code>build.cmd</code> (or <code>./build.sh</code> for Linux users).</li>
<li>Replace [your project]/Plugins folder with AirSim/Unreal/Plugins folder.</li>
<li>Right click on your .uproject file and chose "Generate Visual Studio project files" option. This is not required for Linux.</li>
</ol>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">#</a></h2>
<h4 id="what-are-other-cool-environments">What are other cool environments?<a class="headerlink" href="#what-are-other-cool-environments" title="Permanent link">#</a></h4>
<p><a href="https://www.unrealengine.com/marketplace">Unreal Marketplace</a> has dozens of prebuilt extra-ordinarily detailed <a href="https://www.unrealengine.com/marketplace/content-cat/assets/environments">environments</a> ranging from Moon to Mars and everything in between. The one we have used for testing is called <a href="https://www.unrealengine.com/marketplace/modular-neighborhood-pack">Modular Neighborhood Pack</a>
but you can use any environment. Another free environment is <a href="https://www.unrealengine.com/marketplace/infinity-blade-plain-lands">Infinity Blade series</a>. Alternatively, if you look under the Learn tab in Epic Game Launcher, you will find many free samples that you can use. One of our favorites is "A Boy and His Kite" which is a 100 square miles of highly detailed environment (caution: you will need <em>very</em> beefy PC to run it!).</p>
<h4 id="when-i-press-play-button-some-kind-of-video-starts-instead-of-my-vehicle">When I press Play button some kind of video starts instead of my vehicle.<a class="headerlink" href="#when-i-press-play-button-some-kind-of-video-starts-instead-of-my-vehicle" title="Permanent link">#</a></h4>
<p>If the environment comes with MatineeActor, delete it to avoid any startup demo sequences. There might be other ways to remove it as well, for example, click on Blueprints button, then Level Blueprint and then look at Begin Play event in Event Graph. You might want to disconnect any connections that may be starting "matinee".</p>
<h4 id="is-there-easy-way-to-sync-code-in-my-unreal-project-with-code-in-airsim-repo">Is there easy way to sync code in my Unreal project with code in AirSim repo?<a class="headerlink" href="#is-there-easy-way-to-sync-code-in-my-unreal-project-with-code-in-airsim-repo" title="Permanent link">#</a></h4>
<p>Sure, there is! You can find bunch of <code>.bat</code> files (for linux, <code>.sh</code>) in <code>AirSim\Unreal\Environments\Blocks</code>. Just copy them over to your own Unreal project. Most of these are quite simple and self explanatory.</p>
<h4 id="i-get-some-error-about-map">I get some error about map.<a class="headerlink" href="#i-get-some-error-about-map" title="Permanent link">#</a></h4>
<p>You might have to set default map for your project. For example, if you are using Modular Neighborhood Pack, set the Editor Starter Map as well as Game Default Map to Demo_Map in Project Settings &gt; Maps &amp; Modes.</p>
<h4 id="i-see-add-to-project-option-for-environment-but-not-create-project-option">I see "Add to project" option for environment but not "Create project" option.<a class="headerlink" href="#i-see-add-to-project-option-for-environment-but-not-create-project-option" title="Permanent link">#</a></h4>
<p>In this case, create a new blank C++ project with no Starter Content and add your environment in to it.</p>
<h4 id="i-already-have-my-own-unreal-project-how-do-i-use-airsim-with-it">I already have my own Unreal project. How do I use AirSim with it?<a class="headerlink" href="#i-already-have-my-own-unreal-project-how-do-i-use-airsim-with-it" title="Permanent link">#</a></h4>
<p>Copy the <code>Unreal\Plugins</code> folder from the build you did in the above section into the root of your Unreal project's folder. In your Unreal project's .uproject file, add the key <code>AdditionalDependencies</code> to the "Modules" object
as we showed in the <code>LandscapeMountains.uproject</code> above.
<div class="highlight"><pre><span></span><code><span class="nt">&quot;AdditionalDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;AirSim&quot;</span>
<span class="p">]</span>
</code></pre></div></p>
<p>and the <code>Plugins</code> section to the top level object:
<div class="highlight"><pre><span></span><code><span class="nt">&quot;Plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AirSim&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;Enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../azure/" class="btn btn-neutral float-left" title="Azure 上的 ArSim"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../build_faq/" class="btn btn-neutral float-right" title="场景问题和回答">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2021 Microsoft Research</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/microsoft/airsim" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../azure/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../build_faq/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
